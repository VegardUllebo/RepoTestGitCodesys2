{"payload":{"meta":{"Graph":{"@Type":"81297157","@Value":{"Guid":"(Guid)6da30b86-14a4-4bce-bf5d-2bee212317e2","ParentGuid":"(Guid)7d694963-c4d1-4352-8594-a20401544c44","Name":"(string)SBV","Properties":{"@Type":"2c41fa04:IDictionary","@Value":{}},"TypeGuid":"(Guid)6f9dac99-8de1-4efc-8465-68ac443b7d08","EmbeddedTypeGuids":{"@Type":"[Guid]","@Value":["(Guid)a9ed5b7e-75c5-4651-af16-d2c27e98cb94","(Guid)3b83b776-fb25-43b8-99f2-3c507c9143fc"]}}},"TypeInfos":{"2c41fa04":"{2c41fa04-1834-41c1-816e-303c7aa2c05b}","81297157":"{81297157-7ec9-45ce-845e-84cab2b88ade}","Guid":"System.Guid","string":"System.String"}},"object":{"Graph":{"@Type":"6f9dac99","@Value":{"SpecialFunc":{"@Type":"0db3d7bb:Enum","@Value":"None"},"Implementation":{"@Type":"3b83b776","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)//INFO, COPYRIGHT MANGOIPA GROUP INC\n//SBV function block\n\n\n\n//Populate Temporaries and preset outputs\n\n\n//Mode Control\n\n\n//CODE\n\n//Determine next state\nIF tbHighCommand THEN\n    siNextState              \t\t := ciHigh;\nELSIF tbLowCommand THEN\n    siNextState              \t\t := ciLow;\nEnd_If;\n\n\n//Tilstandsmaskin \nCASE siState OF \n\tciInitState:\t\t\t\t\t\t//Starttilstand, finner riktig tilstand.\n\t\n\t\tIF XGH THEN\n\t\t\tsiState := ciHigh;\n\t\tELSIF XGL THEN\n\t\t\tsiState := ciLow;\t\t\n\t\tEND_IF\n\t\t\n\t\tCASE siNextState OF\n\t\t\tciHigh: siState\t\t\t := ciTransitHigh;\n\t\t\tciLow :\tsiState \t\t := ciTransitLow;\t\t\n\t\tEND_CASE\t\n\t\n\tciLow:\n//Feilhandtering om tilstandsmaskinen går til lav uten tilbakemelding av noe slag.\n//\n// \t        IF (NOT XGL OR XGH) THEN\n//             If (#ttTime >= #PFFD) Then\n//                 #YFI           := #ciFeedbackFaultLow;\n//             End_If;\n//         Else\n//             #stTime            := #ttNow;\n//         End_If;\n\n        CASE siNextState OF\n            ciHigh :                \n                siState      \t\t := ciTransitHigh;\n        END_CASE;\n\t\t\n\tciTransitHigh:\n\t\t\n\t\tIF XGH THEN\n\t\t\tsiState           \t\t  := ciHigh;\n\t\t//ELSIF (for lang tid fra transit til XGH) THEN\n\t\t\t//#YFI               := #ciTransitHighFault;\n\t\tEND_IF\n\t\t\n\t\tCASE siNextState OF\n            ciLow :                \n                siState     \t\t   := ciTransitLow;\n        End_Case;\n\t\t\n\tciHigh:\n// Feilhandtering om en ikkje har noen tilbakemelding \n// \t        IF (NOT #XGH OR #XGL) THEN\n//             If (#ttTime >= #PFFD) Then\n//                 #YFI           := #ciFeedbackFaultHigh;\n//             End_If;\n//         Else\n//             #stTime            := #ttNow;\n//         END_IF;\n\t\t\n        CASE siNextState OF\n            ciLow :\n                siState       \t\t  := ciTransitLow;\n        End_Case;\n\t\n\tciTransitLow:\n\t\tIF XGL THEN\n\t\t\tsiState          \t\t  := ciLOW;\n\t\t//ELSIF (for lang tid fra transit til XGH) THEN\n\t\t\t//#YFI               := #ciTransitHighFault;\n\t\tEND_IF\t\n\n\t\tCASE siNextState OF\n            ciHigh :                \n                siState      \t\t  := ciTransitHigh;\n        End_Case;\t\n\nEND_CASE\n\n\n\n//Write to output //TATT FRA OLAV DIREKTE\nYH                            \t\t\t := (siState = ciTransitHigh) OR ((siState = ciHigh) AND PSTO);\nYL                           \t\t\t := (siState = ciTransitLow) OR ((siState = ciLow) AND PSTO);\n//YF                           \t\t\t := (YFI > ciNoFault);\nBCH                          \t\t\t := (siState = ciHigh) AND XGH AND NOT XGL;\nBCL                         \t\t\t := (siState = ciLow) AND XGL AND NOT XGH;\n//BD                         \t\t\t := FDH OR FDL;\nBS                           \t\t\t := FSH OR FSL;\n\n//Write to HMI\n","LineInfoPersistence":"(string)6da30b86-14a4-4bce-bf5d-2bee212317e2_Impl_LineIds"}}}},"Interface":{"@Type":"a9ed5b7e","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)FUNCTION_BLOCK SBV\nVAR_INPUT\n\tXGH            : BOOL;                \t\t // eXternal Position High\n    XGL            : BOOL;                \t\t // eXternal Position Low\n    XH             : BOOL;                \t\t // eXternal Switch to Position High - in automatic mode\n    XL             : BOOL;                \t\t // eXternal Switch to Position Low - in automatic mode\n\tXOH            : BOOL;               \t\t // \n\tXOL            : BOOL;               \t\t // \n\tXF             : BOOL;                 \t\t // \n\tLSH            : BOOL;               \t\t // \n\tLSL            : BOOL;               \t\t // \n\tFSH            : BOOL;                \t\t // Force Safeguarding High\n    FSL            : BOOL;                \t\t // [Priority] Force Safeguarding Low\n    FDH            : BOOL;              \t\t // Force Disable High\n    FDL            : BOOL;             \t\t     // [Priority] Force Disable Low\n\tFB             : BOOL;             \t\t     // \n\tFU             : BOOL;\t\t\t\t\t\t // \n\tLA             : BOOL;               \t\t // \n\tLM             : BOOL;               \t\t // \n\tLO             : BOOL;               \t\t // \n    //RX             : BOOL;               \t\t // Reset Fault\t\nEND_VAR\n\nVAR_INPUT RETAIN // Disse er hentet fra Olav sin fasit.\n    PFFD           : TIME := T#5S;       \t\t// Feedback failure delay\n    PTDH           : TIME := T#5S;        \t  \t// Transit delay low to high\n    PTDL           : TIME := T#5S;       \t\t// Transit delay high to low\n    PSTO           : BOOL;               \t\t// Output YH and YL  constant on.\nEND_VAR\n\nVAR_OUTPUT\n\tY              : BOOL;                \t\t// \n\tYH             : BOOL;               \t\t// Normal output to switch control element to high state\n    YL             : BOOL;                \t\t// Normal output to switch control element to low state\n    YF             : BOOL;                \t\t// Control element fault\n    BCH            : BOOL;               \t\t// Binary status confirmed high\n    BCL            : BOOL;                \t\t// Binary status confirmed low\n\tBS             : BOOL;                \t\t// Binary status safeguarding\n\tBB             : BOOL;                \t\t//\n\tBU             : BOOL;               \t\t//\n    BA             : BOOL;               \t\t// Binary status automatic mode\n\tBO             : BOOL;                \t\t// \n   // BM             : Bool := true;        \t// Binary status manual mode    \n   // BD             : Bool;                \t// Binary status disabled\n   // YFI            : Int;               \t\t// Fault information\nEND_VAR\n\n\nVAR\n\tsiState       \t\t : INT;                 // State of controlled element\n    siNextState   \t\t : INT;                 // Next state of controlled element\nEND_VAR\n\nVAR_TEMP\n\ttbHighCommand  \t\t: BOOL;                 // High command\n    tbLowCommand   \t\t: BOOL;                 // Low Command\nEND_VAR\n\nVAR CONSTANT\n\tciInitState         : INT := 0;             // [FSM] Initial State of Control Element\n    ciLow               : Int := 1;             // [FSM] Control Element in Low state\n    ciTransitHigh       : Int := 2;             // [FSM] Control Element in transit to High state\n    ciHigh              : Int := 3;             // [FSM] Control Element in High state\n    ciTransitLow        : Int := 4;             // [FSM] Control Element in transit to Low state\nEND_VAR\n\n\n\n\n","LineInfoPersistence":"(string)6da30b86-14a4-4bce-bf5d-2bee212317e2_Decl_LineIds"}}}},"UniqueIdGenerator":"(string)206","POULevel":{"@Type":"8e575c5b:Enum","@Value":"Standard"},"ChildObjectGuids":{"@Type":"ArrayList:IList","@Value":[]},"AddAttributeSubsequent":"(bool)False"}},"TypeInfos":{"0db3d7bb":"{0db3d7bb-cde0-4416-9a7b-ce49a0124323}","3b83b776":"{3b83b776-fb25-43b8-99f2-3c507c9143fc}","6f9dac99":"{6f9dac99-8de1-4efc-8465-68ac443b7d08}","8e575c5b":"{8e575c5b-1d37-49c6-941b-5c0ec7874787}","a9ed5b7e":"{a9ed5b7e-75c5-4651-af16-d2c27e98cb94}","ArrayList":"System.Collections.ArrayList","bool":"System.Boolean","f3878285":"{f3878285-8e4f-490b-bb1b-9acbb7eb04db}","string":"System.String"}}},"FormatVersion":"1.0"}